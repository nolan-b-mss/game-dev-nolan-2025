<!DOCTYPE html>
<html>
<head>
    <title>Tutorial for Nolan's Final Project</title>
    <style>
        body {
            background-color: black;
            overflow: hidden;
            margin: 0;
        }
        .game-object {
            position: absolute;
        }
    </style>
</head>
<body id="myBody">

<h1 style="text-align: center; color: red;">Tutorial for Nolan's Final Project</h1>

<img id="myPlayer" src="myPlayer.png" class="game-object" style="width:32px; height:32px; left: 50px; top:190px;">
<img id="myImg02" src="blockImage.png" class="game-object" style="width:10px; height:200px; left:350px; top:90px;">
<img id="myImg03" src="blockImage.png" class="game-object" style="width:200px; height:10px; left:500px; top:400px;">
<img id="myWinArea" src="myWinArea.gif" class="game-object" style="width:100px; height:80px; left:800px; top:400px;">


<input type=button value="Right" onTouchStart="event.preventDefault(); this.click();" onclick="{
  document.getElementById('myPlayer').style.left = parseInt(document.getElementById('myPlayer').style.left) + 10 + 'px';
  myCheckHit();
}">

<input type=button value="Down" onTouchStart="event.preventDefault(); this.click();" onclick="{
  document.getElementById('myPlayer').style.top = parseInt(document.getElementById('myPlayer').style.top) + 10 + 'px';
  myCheckHit();
}"><br><br>


<script>
   const myPlayer = document.getElementById("myPlayer");
   const playerWidth = 32;
   const playerHeight = 32;
   let playerX = parseInt(myPlayer.style.left);
   let playerY = parseInt(myPlayer.style.top); 
   let maxPlayerX = window.innerWidth;
   let maxPlayerY = window.innerHeight;
   let up = false;
   let left = false;
   let down = false;
   let right = false;


   function myHitOther(my1, my2){
      const element1 = document.getElementById(my1);
      const element2 = document.getElementById(my2);

      if (!element1 || !element2) {
         return false;
      }
      
      let left1   = parseInt(element1.style.left);
      let right1  = left1 + parseInt(element1.style.width);
      let top1    = parseInt(element1.style.top);   
      let bottom1 = top1   + parseInt(element1.style.height);
      
      let left2   = parseInt(element2.style.left);
      let right2  = left2 + parseInt(element2.style.width);
      let top2    = parseInt(element2.style.top);   
      let bottom2 = top2   + parseInt(element2.style.height);
      
      if ((right1  >=  left2  ) &&      	   
          (bottom1 >=  top2   ) &&
          (left1   <=  right2 ) &&
          (top1    <=  bottom2) ){
          return true;
      }
      return false;
   }
   
   document.onkeydown = function(event){
     if (event.key === "w"){up = true;}
     if (event.key === "s"){down = true;}
     if (event.key === "a"){left = true;}
     if (event.key === "d"){right = true;}
   }
   
   document.onkeyup = function(event){
     if (event.key === "w"){up = false;}
     if (event.key === "s"){down = false;}
     if (event.key === "a"){left = false;}
     if (event.key === "d"){right = false;}
   }
   
   setInterval(movement, 10);
   
   function movement(){
     if (up) { playerY -= 3}
     if (down) { playerY += 3}
     if (left) { playerX -= 3}
     if (right) { playerX += 3}
     
     if (playerX < 0){playerX = 0}
     if (playerY < 0){playerY = 0}
     
     if (playerX > maxPlayerX - playerWidth){playerX = maxPlayerX - playerWidth} 
     if (playerY > maxPlayerY - playerHeight){playerY = maxPlayerY - playerHeight}

     myPlayer.style.top = playerY + 'px';
     myPlayer.style.left = playerX + 'px';
     myCheckHit();
   }

   function myCheckHit(){

      if ( myHitOther('myPlayer','myImg02') ){
         myPlayer.style.left = '20px';
      }   
      
      if ( myHitOther('myPlayer','myImg03') ){
         myPlayer.style.left = '20px';
      }   
      
      if ( myHitOther('myPlayer','myWinArea') ){
         myPlayer.style.left = '20px';
         location = 'https://nolan-b-mss.github.io/personal-use-nolan/public/undertale-test-05.html';
      }
   }
</script>

</body>
</html>

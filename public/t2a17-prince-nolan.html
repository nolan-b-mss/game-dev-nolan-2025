<h1 align=center>t2a17-prince-nolan.html</h1>
<body>
    
    <div>
        <label for="mySpeedInput">Animation Speed:</label>
        <input 
            type="range" 
            id="mySpeedInput" 
            min="0.005" 
            max="0.1" 
            step="0.005" 
            value="0.02"
            oninput="myUpdateSpeedAndDisplay(this.value)"
        >
        <span id="mySpeedDisplay">0.02</span>
        <p>Default speed is 0.02</p>
    </div>
    <br>
    
    <canvas id="myCrownCanvasID" width="300" height="200"></canvas>
    
    <script>
        const myCanvasID = 'myCrownCanvasID'
        const myCanvasElement = document.getElementById(myCanvasID)
        const myDrawingContext = myCanvasElement.getContext('2d')

        const myPathPoints = [
            { x: 50, y: 150 },
            { x: 50, y: 80 },    
            { x: 70, y: 60 },    
            { x: 110, y: 80 },   
            { x: 150, y: 60 },   
            { x: 190, y: 80 },   
            { x: 230, y: 60 },   
            { x: 250, y: 80 },   
            { x: 250, y: 150 },  
            { x: 50, y: 150 }    
        ];

        let mySegmentIndex = 0      
        let mySegmentProgress = 0.0
        let myIsCrownDrawn = false
        let myAnimationSpeed = 0.02


        myDrawingContext.strokeStyle = 'gold'
        myDrawingContext.lineWidth = 4
        myDrawingContext.lineJoin = 'round'

        function myUpdateSpeedAndDisplay(newSpeedValue) {

            myAnimationSpeed = parseFloat(newSpeedValue)
            
            document.getElementById('mySpeedDisplay').textContent = newSpeedValue
        }

        function myDrawFullCrownLine() {
            myDrawingContext.beginPath()
            myDrawingContext.moveTo(myPathPoints[0].x, myPathPoints[0].y)
            for (let i = 1; i < myPathPoints.length; i++) {
                myDrawingContext.lineTo(myPathPoints[i].x, myPathPoints[i].y)
            }
            myDrawingContext.stroke()
        }

        function myAnimateDrawing() {
            myDrawingContext.clearRect(0, 0, myCanvasElement.width, myCanvasElement.height);

            if (myIsCrownDrawn) {
                myDrawFullCrownLine()
            } else {
                myDrawingContext.beginPath();
                myDrawingContext.moveTo(myPathPoints[0].x, myPathPoints[0].y);
                for (let i = 1; i <= mySegmentIndex + 1 && i < myPathPoints.length; i++) {
                    myDrawingContext.lineTo(myPathPoints[i].x, myPathPoints[i].y);
                }
                myDrawingContext.stroke();
            }

            const myStartPoint = myPathPoints[mySegmentIndex]
            const myTargetIndex = (mySegmentIndex + 1) % myPathPoints.length
            const myEndPoint = myPathPoints[myTargetIndex]

            const myCurrentX = myStartPoint.x + (myEndPoint.x - myStartPoint.x) * mySegmentProgress
            const myCurrentY = myStartPoint.y + (myEndPoint.y - myStartPoint.y) * mySegmentProgress

            myDrawingContext.beginPath()
            myDrawingContext.arc(myCurrentX, myCurrentY, 5, 0, Math.PI * 2)
            myDrawingContext.fillStyle = 'red'
            myDrawingContext.fill()

            mySegmentProgress += myAnimationSpeed

            if (mySegmentProgress >= 1.0) {
                mySegmentIndex++    
                mySegmentProgress = 0

                if (mySegmentIndex >= myPathPoints.length - 1) { 
                    myIsCrownDrawn = true
                    mySegmentIndex = 0  
                }
            }

            requestAnimationFrame(myAnimateDrawing);
        }

        myAnimateDrawing();
    </script>
</body>
</html>
